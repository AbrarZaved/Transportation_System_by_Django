<div
  id="busModal"
  class="modal hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center animate-fade-in"
>
  <div
    class="bg-white w-11/12 max-w-sm p-5 rounded-lg shadow-xl transform scale-90 opacity-0 animate-slide-up"
    id="busModalContent"
  >
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-lg font-bold text-gray-800">Add New Bus</h3>
      <button
        onclick="toggleModal('busModal')"
        class="text-gray-500 hover:text-red-600 text-xl font-bold"
      >
        &times;
      </button>
    </div>
    <form
      method="POST"
      action="{% url 'manage_drivers_buses' %}"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3">
        {# Main grid container #} {# Row 1: Bus Name and Bus Tag #}
        <div class="col-span-1">
          <label
            for="{{ bus_form.bus_name.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Name</label
          >
          {{ bus_form.bus_name }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ bus_form.bus_tag.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Tag</label
          >
          {{ bus_form.bus_tag }}
        </div>

        {# Row 2: Bus Number and Bus Model #}
        <div class="col-span-1">
          <label
            for="{{ bus_form.bus_number.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Number</label
          >
          {{ bus_form.bus_number }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ bus_form.bus_model.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Model</label
          >
          {{ bus_form.bus_model }}
        </div>

        {# Row 3: Bus Capacity #}
        <div class="col-span-full">
          {# Capacity takes full width #}
          <label
            for="{{ bus_form.bus_capacity.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Capacity (Seats)</label
          >
          {{ bus_form.bus_capacity }}
        </div>

        {# Row 5: Bus Status (checkbox) #}
        <div class="col-span-full flex items-center mt-2">
          {{ bus_form.bus_status }}
          <label
            for="{{ bus_form.bus_status.id_for_label }}"
            class="ml-2 text-sm font-medium text-gray-700"
            >Bus Active</label
          >
        </div>
      </div>
      {# End of grid container #}

      <div class="flex justify-end mt-4">
        <button
          type="submit"
          name="add_bus"
          class="px-3 py-1.5 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 text-sm transition-colors"
        >
          Add Bus
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Edit Bus Modal -->
<div
  id="editBusModal"
  class="modal hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center animate-fade-in"
>
  <div
    class="bg-white w-11/12 max-w-sm p-5 rounded-lg shadow-xl transform scale-90 opacity-0 animate-slide-up"
    id="editBusModalContent"
  >
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-lg font-bold text-gray-800">Edit Bus</h3>
      <button
        onclick="toggleModal('editBusModal')"
        class="text-gray-500 hover:text-red-600 text-xl font-bold"
      >
        &times;
      </button>
    </div>
    <form
      method="POST"
      action="{% url 'manage_drivers_buses' %}"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <input type="hidden" id="editBusId" name="bus_id" />
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3">
        <div class="col-span-1">
          <label
            for="editBusName"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Name</label
          >
          <input
            type="text"
            id="editBusName"
            name="bus_name"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-blue-400 focus:border-blue-400 text-sm"
            required
          />
        </div>
        <div class="col-span-1">
          <label
            for="editBusTag"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Tag</label
          >
          <input
            type="text"
            id="editBusTag"
            name="bus_tag"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-blue-400 focus:border-blue-400 text-sm"
            required
          />
        </div>

        <div class="col-span-1">
          <label
            for="editBusNumber"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Number</label
          >
          <input
            type="text"
            id="editBusNumber"
            name="bus_number"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-blue-400 focus:border-blue-400 text-sm"
            required
          />
        </div>
        <div class="col-span-1">
          <label
            for="editBusModel"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Bus Model</label
          >
          <input
            type="text"
            id="editBusModel"
            name="bus_model"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-blue-400 focus:border-blue-400 text-sm"
            required
          />
        </div>

        <div class="col-span-full">
          <label
            for="editBusCapacity"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Capacity (Seats)</label
          >
          <input
            type="number"
            id="editBusCapacity"
            name="bus_capacity"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-blue-400 focus:border-blue-400 text-sm"
            min="1"
            required
          />
        </div>

        <div class="col-span-full flex items-center mt-2">
          <input
            type="checkbox"
            id="editBusStatus"
            name="bus_status"
            class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
          />
          <label
            for="editBusStatus"
            class="ml-2 text-sm font-medium text-gray-700"
            >Bus Active</label
          >
        </div>
      </div>

      <div class="flex justify-end mt-4">
        <button
          type="submit"
          name="edit_bus"
          class="px-3 py-1.5 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 text-sm transition-colors"
        >
          Update Bus
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Inside driverModal -->
<div
  id="driverModal"
  class="modal hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center animate-fade-in"
>
  <div
    class="bg-white w-11/12 max-w-sm p-5 rounded-lg shadow-xl transform scale-90 opacity-0 animate-slide-up"
    id="driverModalContent"
  >
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-lg font-bold text-gray-800">Add New Driver</h3>
      <button
        onclick="toggleModal('driverModal')"
        class="text-gray-500 hover:text-red-600 text-xl font-bold"
      >
        &times;
      </button>
    </div>
    <form
      method="POST"
      action="{% url 'manage_drivers_buses' %}"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3">
        {# Main grid container #} {# Row 1: Name and Phone Number #}
        <div class="col-span-1">
          <label
            for="{{ driver_form.name.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Driver Name</label
          >
          {{ driver_form.name }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ driver_form.phone_number.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Phone Number</label
          >
          {{ driver_form.phone_number }}
        </div>

        {# Row 2: License Number and License Class #}
        <div class="col-span-1">
          <label
            for="{{ driver_form.license_number.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Number</label
          >
          {{ driver_form.license_number }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ driver_form.license_class.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Class</label
          >
          {{ driver_form.license_class }}
        </div>

        {# Row 3: License Issued and License Expiry Dates #}
        <div class="col-span-1">
          <label
            for="{{ driver_form.license_issued.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Issued Date</label
          >
          {{ driver_form.license_issued }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ driver_form.license_expiry.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Expiry Date</label
          >
          {{ driver_form.license_expiry }}
        </div>

        <div class="col-span-full">
          {# Uses full width on all screen sizes #}
          <label
            for="{{ driver_form.license_country.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Country</label
          >
          {{ driver_form.license_country }}
        </div>

        {# Row 5: License Photo and Driver Photo (side-by-side) #}
        <div class="col-span-1">
          <label
            for="{{ driver_form.license_photo.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Photo</label
          >
          {{ driver_form.license_photo }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ driver_form.driver_photo.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Driver Photo</label
          >
          {{ driver_form.driver_photo }}
        </div>
        <div class="col-span-full flex items-center mt-2">
          {{ driver_form.driver_status }}
          <label
            for="{{ driver_form.driver_status.id_for_label }}"
            class="ml-2 text-sm font-medium text-gray-700"
            >Driver Active</label
          >
        </div>
      </div>
      {# End of grid container #}

      <div class="flex justify-end mt-4">
        {# Margin-top added to separate button from the last grid row #}
        <button
          type="submit"
          name="add_driver"
          class="px-3 py-1.5 bg-green-600 text-white rounded-md font-medium hover:bg-green-700 text-sm transition-colors"
        >
          Add Driver
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Edit Driver Modal -->
<div
  id="editDriverModal"
  class="modal hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center animate-fade-in"
>
  <div
    class="bg-white w-11/12 max-w-sm p-5 rounded-lg shadow-xl transform scale-90 opacity-0 animate-slide-up"
    id="editDriverModalContent"
  >
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-lg font-bold text-gray-800">Edit Driver</h3>
      <button
        onclick="toggleModal('editDriverModal')"
        class="text-gray-500 hover:text-red-600 text-xl font-bold"
      >
        &times;
      </button>
    </div>
    <form
      method="POST"
      action="{% url 'manage_drivers_buses' %}"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <input type="hidden" id="editDriverId" name="driver_id" />
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3">
        <div class="col-span-1">
          <label
            for="editDriverName"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Driver Name</label
          >
          <input
            type="text"
            id="editDriverName"
            name="name"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
            required
          />
        </div>
        <div class="col-span-1">
          <label
            for="editDriverPhone"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Phone Number</label
          >
          <input
            type="tel"
            id="editDriverPhone"
            name="phone_number"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
          />
        </div>

        <div class="col-span-1">
          <label
            for="editDriverLicense"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Number</label
          >
          <input
            type="text"
            id="editDriverLicense"
            name="license_number"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
            required
          />
        </div>
        <div class="col-span-1">
          <label
            for="editDriverLicenseClass"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Class</label
          >
          <input
            type="text"
            id="editDriverLicenseClass"
            name="license_class"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
            required
          />
        </div>

        <div class="col-span-1">
          <label
            for="editDriverLicenseIssued"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Issued Date</label
          >
          <input
            type="date"
            id="editDriverLicenseIssued"
            name="license_issued"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
            required
          />
        </div>
        <div class="col-span-1">
          <label
            for="editDriverLicenseExpiry"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Expiry Date</label
          >
          <input
            type="date"
            id="editDriverLicenseExpiry"
            name="license_expiry"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
            required
          />
        </div>

        <div class="col-span-full">
          <label
            for="editDriverLicenseCountry"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Country</label
          >
          <input
            type="text"
            id="editDriverLicenseCountry"
            name="license_country"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
            required
          />
        </div>

        <div class="col-span-1">
          <label
            for="editDriverLicensePhoto"
            class="block text-sm font-medium text-gray-700 mb-1"
            >License Photo</label
          >
          <input
            type="file"
            id="editDriverLicensePhoto"
            name="license_photo"
            accept="image/*"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
          />
        </div>
        <div class="col-span-1">
          <label
            for="editDriverPhoto"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Driver Photo</label
          >
          <input
            type="file"
            id="editDriverPhoto"
            name="driver_photo"
            accept="image/*"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-green-400 focus:border-green-400 text-sm"
          />
        </div>

        <div class="col-span-full flex items-center mt-2">
          <input
            type="checkbox"
            id="editDriverStatus"
            name="driver_status"
            class="h-4 w-4 text-green-600 border-gray-300 rounded focus:ring-green-500"
          />
          <label
            for="editDriverStatus"
            class="ml-2 text-sm font-medium text-gray-700"
            >Driver Active</label
          >
        </div>
      </div>

      <div class="flex justify-end mt-4">
        <button
          type="submit"
          name="edit_driver"
          class="px-3 py-1.5 bg-green-600 text-white rounded-md font-medium hover:bg-green-700 text-sm transition-colors"
        >
          Update Driver
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Helper Modal -->
<div
  id="helperModal"
  class="modal hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center animate-fade-in"
>
  <div
    class="bg-white w-11/12 max-w-sm p-5 rounded-lg shadow-xl transform scale-90 opacity-0 animate-slide-up"
    id="helperModalContent"
  >
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-lg font-bold text-gray-800">Add New Helper</h3>
      <button
        onclick="toggleModal('helperModal')"
        class="text-gray-500 hover:text-red-600 text-xl font-bold"
      >
        &times;
      </button>
    </div>
    <form
      method="POST"
      action="{% url 'manage_drivers_buses' %}"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <div class="grid grid-cols-1 gap-y-3">
        <div class="col-span-1">
          <label
            for="{{ helper_form.name.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Helper Name</label
          >
          {{ helper_form.name }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ helper_form.phone_number.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Phone Number</label
          >
          {{ helper_form.phone_number }}
        </div>
        <div class="col-span-1">
          <label
            for="{{ helper_form.helper_photo.id_for_label }}"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Helper Photo</label
          >
          {{ helper_form.helper_photo }}
        </div>
        <div class="col-span-1 flex items-center mt-2">
          {{ helper_form.helper_status }}
          <label
            for="{{ helper_form.helper_status.id_for_label }}"
            class="ml-2 text-sm font-medium text-gray-700"
            >Helper Active</label
          >
        </div>
      </div>

      <div class="flex justify-end mt-4">
        <button
          type="submit"
          name="add_helper"
          class="px-3 py-1.5 bg-purple-600 text-white rounded-md font-medium hover:bg-purple-700 text-sm transition-colors"
        >
          Add Helper
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Edit Helper Modal -->
<div
  id="editHelperModal"
  class="modal hidden fixed inset-0 z-50 bg-black bg-opacity-60 flex items-center justify-center animate-fade-in"
>
  <div
    class="bg-white w-11/12 max-w-sm p-5 rounded-lg shadow-xl transform scale-90 opacity-0 animate-slide-up"
    id="editHelperModalContent"
  >
    <div class="flex justify-between items-center mb-3">
      <h3 class="text-lg font-bold text-gray-800">Edit Helper</h3>
      <button
        onclick="toggleModal('editHelperModal')"
        class="text-gray-500 hover:text-red-600 text-xl font-bold"
      >
        &times;
      </button>
    </div>
    <form
      method="POST"
      action="{% url 'manage_drivers_buses' %}"
      enctype="multipart/form-data"
    >
      {% csrf_token %}
      <input type="hidden" id="editHelperId" name="helper_id" />
      <div class="grid grid-cols-1 gap-y-3">
        <div class="col-span-1">
          <label
            for="editHelperName"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Helper Name</label
          >
          <input
            type="text"
            id="editHelperName"
            name="name"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-purple-400 focus:border-purple-400 text-sm"
            required
          />
        </div>
        <div class="col-span-1">
          <label
            for="editHelperPhone"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Phone Number</label
          >
          <input
            type="tel"
            id="editHelperPhone"
            name="phone_number"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-purple-400 focus:border-purple-400 text-sm"
            required
          />
        </div>
        <div class="col-span-1">
          <label
            for="editHelperPhoto"
            class="block text-sm font-medium text-gray-700 mb-1"
            >Helper Photo</label
          >
          <input
            type="file"
            id="editHelperPhoto"
            name="helper_photo"
            accept="image/*"
            class="w-full px-2 py-1.5 border border-gray-300 rounded-sm focus:ring-purple-400 focus:border-purple-400 text-sm"
          />
        </div>
        <div class="col-span-1 flex items-center mt-2">
          <input
            type="checkbox"
            id="editHelperStatus"
            name="helper_status"
            class="h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"
          />
          <label
            for="editHelperStatus"
            class="ml-2 text-sm font-medium text-gray-700"
            >Helper Active</label
          >
        </div>
      </div>

      <div class="flex justify-end mt-4">
        <button
          type="submit"
          name="edit_helper"
          class="px-3 py-1.5 bg-purple-600 text-white rounded-md font-medium hover:bg-purple-700 text-sm transition-colors"
        >
          Update Helper
        </button>
      </div>
    </form>
  </div>
</div>
